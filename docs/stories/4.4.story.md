# Story 4.4: 測試與除錯

## Status
Draft

## Story

**As a** 專案團隊,  
**I want** 對 Windows 平台的 MVP 功能進行全面測試與品質驗證,  
**so that** 確保應用程式的穩定性、效能和用戶體驗符合預期標準

## Acceptance Criteria

1. 完成整合測試計劃並執行所有核心功能測試（檔案瀏覽、預覽、編輯、匯出）
2. 完成效能測試並記錄結果（大型檔案處理、記憶體使用、啟動時間）
3. 完成錯誤處理測試並驗證錯誤訊息的正確性
4. 完成使用者體驗測試並提供 UI/UX 改進建議
5. 建立測試報告，記錄所有發現的問題和測試結果
6. 所有高優先級問題已記錄並追蹤修復狀態

## Tasks / Subtasks

- [ ] **Task 1: 制定測試計劃** (AC: 1, 2, 3, 4)
  - [ ] 分析應用程式功能範圍
  - [ ] 建立測試案例清單
  - [ ] 定義測試環境和工具
  - [ ] 建立測試資料準備計劃

- [ ] **Task 2: 整合測試執行** (AC: 1)
  - [ ] 檔案系統功能測試
    - [ ] 磁碟列表載入測試
    - [ ] 目錄瀏覽測試
    - [ ] 檔案選擇與載入測試
  - [ ] 預覽功能測試
    - [ ] Markdown 渲染測試
    - [ ] 基本語法顯示測試（標題、段落、列表）
    - [ ] 程式碼區塊語法高亮測試
    - [ ] 數學公式渲染測試
  - [ ] 編輯功能測試
    - [ ] 編輯模式切換測試
    - [ ] 即時預覽同步測試
    - [ ] 檔案儲存測試
  - [ ] 匯出功能測試
    - [ ] HTML 匯出測試
    - [ ] PDF 匯出測試（A4/Letter/Legal、Portrait/Landscape、頁碼）
    - [ ] 匯出選單互動測試

- [ ] **Task 3: 效能測試執行** (AC: 2)
  - [ ] 大型檔案測試
    - [ ] 測試 1MB、5MB、10MB Markdown 檔案
    - [ ] 記錄載入時間
    - [ ] 記錄渲染時間
  - [ ] 記憶體使用測試
    - [ ] 監控應用程式記憶體使用
    - [ ] 測試記憶體洩漏（長時間運行）
  - [ ] 啟動時間測試
    - [ ] 記錄應用程式啟動時間
    - [ ] 記錄首次檔案載入時間

- [ ] **Task 4: 錯誤處理測試執行** (AC: 3)
  - [ ] 異常情況測試
    - [ ] 無權限存取檔案/目錄
    - [ ] 檔案不存在
    - [ ] 檔案格式錯誤
    - [ ] 磁碟空間不足（匯出時）
    - [ ] 網路中斷（如適用）
  - [ ] 錯誤訊息測試
    - [ ] 驗證錯誤訊息是否清楚易懂
    - [ ] 驗證錯誤訊息是否正確顯示
    - [ ] 驗證錯誤恢復機制

- [ ] **Task 5: 使用者體驗測試執行** (AC: 4)
  - [ ] 操作流程測試
    - [ ] 完整使用者旅程測試（開啟應用 → 瀏覽檔案 → 預覽 → 編輯 → 儲存 → 匯出）
    - [ ] 快捷鍵測試（如適用）
    - [ ] 響應式設計測試（不同視窗大小）
  - [ ] UI/UX 改進建議
    - [ ] 記錄可用性問題
    - [ ] 記錄視覺設計問題
    - [ ] 記錄互動體驗問題

- [ ] **Task 6: 測試報告撰寫** (AC: 5, 6)
  - [ ] 整理測試結果
  - [ ] 記錄發現的問題（Bug、改進建議）
  - [ ] 建立問題追蹤清單
  - [ ] 提供測試總結和建議

## Dev Notes

### 測試環境
- **平台**：Windows 10/11
- **測試工具**：
  - Windows 工作管理員（記憶體監控）
  - Visual Studio 診斷工具（效能分析）
  - 手動測試（功能測試）

### 測試資料準備
- 準備各種大小的 Markdown 檔案（小、中、大）
- 準備包含各種 Markdown 語法的測試檔案
- 準備錯誤情況測試資料（無權限、不存在等）

### 測試重點
1. **核心功能穩定性**：確保所有已實作功能正常運作
2. **效能基準**：建立效能基準，為後續優化提供參考
3. **錯誤處理完整性**：確保所有錯誤情況都有適當處理
4. **使用者體驗**：從使用者角度評估應用程式的易用性

### 手動測試清單
詳細的手動測試清單請參考：[4.4.測試清單.md](./4.4.測試清單.md)

該清單包含：
- 50+ 個詳細測試案例
- 每個測試案例的具體測試步驟
- 預期結果和實際結果記錄欄位
- 測試狀態追蹤
- 測試總結模板

## Testing

### 測試案例清單

#### 1. 檔案系統功能測試

| 測試案例 ID | 測試描述 | 預期結果 | 狀態 |
|-----------|---------|---------|------|
| TC-FS-001 | 應用程式啟動時自動載入磁碟列表 | 磁碟列表正確顯示 | ⏳ 待測試 |
| TC-FS-002 | 選擇磁碟後載入目錄結構 | 目錄樹正確顯示 | ⏳ 待測試 |
| TC-FS-003 | 展開/收合目錄節點 | 節點狀態正確切換 | ⏳ 待測試 |
| TC-FS-004 | 選擇 Markdown 檔案 | 檔案內容正確載入並顯示 | ⏳ 待測試 |
| TC-FS-005 | 選擇非 Markdown 檔案 | 不顯示或顯示錯誤訊息 | ⏳ 待測試 |
| TC-FS-006 | 選擇不存在的檔案 | 顯示適當的錯誤訊息 | ⏳ 待測試 |
| TC-FS-007 | 無權限存取目錄 | 顯示適當的錯誤訊息 | ⏳ 待測試 |

#### 2. 預覽功能測試

| 測試案例 ID | 測試描述 | 預期結果 | 狀態 |
|-----------|---------|---------|------|
| TC-PV-001 | 基本 Markdown 語法渲染 | 標題、段落、列表正確顯示 | ⏳ 待測試 |
| TC-PV-002 | 程式碼區塊語法高亮 | 程式碼正確高亮顯示 | ⏳ 待測試 |
| TC-PV-003 | 數學公式渲染 | 數學公式正確渲染 | ⏳ 待測試 |
| TC-PV-004 | 表格渲染 | 表格正確顯示 | ⏳ 待測試 |
| TC-PV-005 | 連結和圖片渲染 | 連結和圖片正確顯示 | ⏳ 待測試 |
| TC-PV-006 | 大型檔案預覽 | 預覽內容正確且效能可接受 | ⏳ 待測試 |
| TC-PV-007 | 載入狀態顯示 | 載入指示器正確顯示 | ⏳ 待測試 |
| TC-PV-008 | 錯誤狀態顯示 | 錯誤訊息正確顯示 | ⏳ 待測試 |

#### 3. 編輯功能測試

| 測試案例 ID | 測試描述 | 預期結果 | 狀態 |
|-----------|---------|---------|------|
| TC-ED-001 | 切換到編輯模式 | 編輯器正確顯示 | ⏳ 待測試 |
| TC-ED-002 | 編輯內容即時預覽 | 預覽內容即時更新（防抖機制） | ⏳ 待測試 |
| TC-ED-003 | 儲存檔案 | 檔案內容正確儲存 | ⏳ 待測試 |
| TC-ED-004 | 儲存成功訊息顯示 | 成功訊息顯示並自動消失 | ⏳ 待測試 |
| TC-ED-005 | 儲存失敗處理 | 錯誤訊息正確顯示 | ⏳ 待測試 |
| TC-ED-006 | 編輯模式切換回預覽模式 | 預覽模式正確顯示 | ⏳ 待測試 |
| TC-ED-007 | 編輯器空狀態顯示 | 空狀態訊息正確顯示 | ⏳ 待測試 |

#### 4. 匯出功能測試

| 測試案例 ID | 測試描述 | 預期結果 | 狀態 |
|-----------|---------|---------|------|
| TC-EX-001 | 顯示匯出選單 | 所有格式正確顯示 | ⏳ 待測試 |
| TC-EX-002 | HTML 匯出 | HTML 檔案正確生成 | ⏳ 待測試 |
| TC-EX-003 | PDF 匯出（A4 直向） | PDF 檔案正確生成 | ⏳ 待測試 |
| TC-EX-004 | PDF 匯出（A4 橫向） | PDF 檔案正確生成 | ⏳ 待測試 |
| TC-EX-005 | PDF 匯出（Letter 直向） | PDF 檔案正確生成 | ⏳ 待測試 |
| TC-EX-006 | PDF 匯出（Legal 直向） | PDF 檔案正確生成 | ⏳ 待測試 |
| TC-EX-007 | PDF 頁碼選項 | 頁碼正確顯示/隱藏 | ⏳ 待測試 |
| TC-EX-008 | 匯出中狀態顯示 | 載入指示器正確顯示 | ⏳ 待測試 |
| TC-EX-009 | 匯出成功訊息 | 成功訊息顯示並自動消失 | ⏳ 待測試 |
| TC-EX-010 | 匯出失敗處理 | 錯誤訊息正確顯示 | ⏳ 待測試 |
| TC-EX-011 | 點擊外部關閉選單 | 選單正確關閉 | ⏳ 待測試 |
| TC-EX-012 | 匯出中防連點 | 匯出按鈕正確禁用 | ⏳ 待測試 |

#### 5. 效能測試

| 測試案例 ID | 測試描述 | 預期結果 | 狀態 |
|-----------|---------|---------|------|
| TC-PF-001 | 應用程式啟動時間 | 啟動時間 < 3 秒 | ⏳ 待測試 |
| TC-PF-002 | 1MB 檔案載入時間 | 載入時間 < 1 秒 | ⏳ 待測試 |
| TC-PF-003 | 5MB 檔案載入時間 | 載入時間 < 3 秒 | ⏳ 待測試 |
| TC-PF-004 | 10MB 檔案載入時間 | 載入時間 < 5 秒 | ⏳ 待測試 |
| TC-PV-005 | 記憶體使用（正常運行） | 記憶體使用 < 200MB | ⏳ 待測試 |
| TC-PV-006 | 記憶體洩漏測試（1 小時） | 記憶體使用穩定 | ⏳ 待測試 |

#### 6. 錯誤處理測試

| 測試案例 ID | 測試描述 | 預期結果 | 狀態 |
|-----------|---------|---------|------|
| TC-ER-001 | 無權限存取檔案 | 顯示清楚錯誤訊息 | ⏳ 待測試 |
| TC-ER-002 | 檔案不存在 | 顯示清楚錯誤訊息 | ⏳ 待測試 |
| TC-ER-003 | 檔案格式錯誤 | 顯示清楚錯誤訊息 | ⏳ 待測試 |
| TC-ER-004 | 磁碟空間不足（匯出） | 顯示清楚錯誤訊息 | ⏳ 待測試 |
| TC-ER-005 | 匯出路徑無權限 | 顯示清楚錯誤訊息 | ⏳ 待測試 |
| TC-ER-006 | 取消匯出操作 | 操作正確取消，無錯誤 | ⏳ 待測試 |

#### 7. 使用者體驗測試

| 測試案例 ID | 測試描述 | 預期結果 | 狀態 |
|-----------|---------|---------|------|
| TC-UX-001 | 完整使用者旅程 | 所有操作流暢無阻 | ⏳ 待測試 |
| TC-UX-002 | 響應式設計（窄視窗） | UI 元素正確顯示 | ⏳ 待測試 |
| TC-UX-003 | 響應式設計（寬視窗） | UI 元素正確顯示 | ⏳ 待測試 |
| TC-UX-004 | 工具列按鈕狀態 | 按鈕狀態正確反映功能狀態 | ⏳ 待測試 |
| TC-UX-005 | 訊息顯示時機 | 訊息在正確時機顯示 | ⏳ 待測試 |
| TC-UX-006 | 選單互動體驗 | 選單操作流暢直覺 | ⏳ 待測試 |

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-11 | 1.0 | 初始故事建立 | QA Agent |

## QA Agent Record

### 測試計劃制定日期
2025-01-11

### 測試範圍
- **平台**：Windows 10/11
- **測試類型**：整合測試、效能測試、錯誤處理測試、使用者體驗測試
- **測試方法**：手動測試為主

### 測試重點
1. **功能完整性**：驗證所有已實作功能正常運作
2. **效能基準**：建立效能基準，為後續優化提供參考
3. **錯誤處理**：確保所有錯誤情況都有適當處理
4. **使用者體驗**：從使用者角度評估應用程式的易用性

### 測試工具
- Windows 工作管理員（記憶體監控）
- Visual Studio 診斷工具（效能分析）
- 手動測試（功能測試）

### 測試資料準備
- 各種大小的 Markdown 檔案（小、中、大）
- 包含各種 Markdown 語法的測試檔案
- 錯誤情況測試資料（無權限、不存在等）

## QA Results

_待 QA 代理執行測試並記錄結果_

### 測試執行記錄

#### 測試執行日期
_待填寫_

#### 測試環境
- **作業系統**：_待填寫_
- **應用程式版本**：_待填寫_
- **測試工具**：_待填寫_

#### 測試結果摘要
- **總測試案例數**：_待填寫_
- **通過數**：_待填寫_
- **失敗數**：_待填寫_
- **阻塞數**：_待填寫_
- **跳過數**：_待填寫_

#### 發現的問題

##### 高優先級問題
_待記錄_

##### 中優先級問題
_待記錄_

##### 低優先級問題
_待記錄_

##### 改進建議
_待記錄_

#### 效能測試結果

##### 啟動時間
- **應用程式啟動時間**：_待測量_
- **首次檔案載入時間**：_待測量_

##### 檔案載入時間
- **1MB 檔案**：_待測量_
- **5MB 檔案**：_待測量_
- **10MB 檔案**：_待測量_

##### 記憶體使用
- **正常運行記憶體使用**：_待測量_
- **1 小時運行後記憶體使用**：_待測量_

#### 測試總結
_待填寫_

#### 建議
_待填寫_

